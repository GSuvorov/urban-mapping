{"version":3,"sources":["src/constants.js","src/layers.js","src/utils.js","src/sources.js","src/index.js","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["isDevelopment","Tokens","development","production","stylePath","STYLES","dark","satellite","PALETTES","red","pointSqrtCount","getHeatColors","palette","HEATMAP_ZERO","HEATMAP_SHADES","h","heatmapIntensity","heatmapRadius","heatmapOpacity","circleOpacity","circleRadius","circlesLayout","removeDelay","loadHeatLayer","map","before","id","source","addLayer","type","maxzoom","paint","setPaintProperty","loadCircleLayer","minzoom","layout","removeLabels","getStyle","layers","reduce","removed","layer","removeLayer","zip","arrays","maxLength","Math","max","x","length","Array","from","_","i","k","buildHeatmapDencity","palete","reverse","result","concat","slice","flat","getLabelsLayer","style","firstSymbolId","createInteractionsSwitcher","interactions","allInteractions","handlers","enable","operation","forEach","getCircleColor","colorSteps","createLayersKeeper","keepLayers","layerIds","sourceIds","l","push","filterLayers","some","startsWith","filterSources","s","nextStyle","onStyleChanged","currentStyle","dataLayers","filter","dataSources","Object","keys","sources","acc","setStyle","once","nextLayerIds","addSource","boforeIndex","indexOf","undefined","splice","switchDataLayers","currentDataLayers","heatId","circlesId","loadGTPointsSource","url","loadOSMPointsSource","mapNode","document","getElementById","info","header","navbar","controls","showNavbar","animationName","showHeader","hideHeader","showInfo","hideInfo","showControls","hideControls","exploreBtn","addEventListener","startExploring","switchInteractions","labelsLayerId","accessToken","setTimeout","mapboxgl","Map","container","zoom","center","minZoom","attributionControl","getCanvas","cursor","flyTo","duration","toggleBaseMap","passedId","baseMapTogglers","getElementsByClassName","prevStyleId","t","classList","toggle","dataLayerTogglers","prevLayerId","toggleDataLayer","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","split","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","links","querySelectorAll","module"],"mappings":"AKAA,ACAA,IDAI0J,ACAAW,MAAM,GDAG,ACAAC,GDAG,IAAhB,ACAoB,CAAC,cAAD,CAApB;;ADCA,ACCA,AFAA,SCDSX,ACCAY,UAAT,CAAoBC,IAApB,EAA0B,CDD1B,GAA8B;AAC5B,ACCA,MDDI,ACCAC,CDDCf,MCCM,GDDX,ACCcc,EDDE,ECCE,CAACE,SAAL,EAAd;ADAEhB,ADEJ,ICFIA,SAAS,GAAGE,YAAY,EAAxB;AACD,ACADa,EAAAA,OAAO,CAACE,MAAR,GAAiB,YAAY;AAC3BH,AFOJ,IEPIA,IAAI,CAACI,MAAL;ADCF,ACAC,ANNH,GMIE,MDEOlB,SAAP;AACD,ADMD,ADbO,SAAS/C,kBAAT,CAA4BnF,GAA5B,EAAiC;AGOtCiJ,ALPF,AECEjJ,EGMAiJ,AHNAjJ,GAAG,CAAC0E,GGMG,CAAC2E,IAAR,CHNA,CAAc,CGMCL,IAAI,CAACK,IAAL,CAAUC,AHNzB,EAA2B,GGMZ,CAAgB,GAAhB,EAAqB,CAArB,IAA0B,GAA1B,GAAgCC,IAAI,CAACC,GAAL,EAA/C;ADEF,ACDER,AFMF,ADZI3I,EGMF2I,EHNE3I,EGME,CAACoJ,CHNC,CEOCrB,CFPC,OGMR,CAAgBsB,AHPW,GEQ7B,GAAwB,MCDtB,CAA6BT,OAA7B,EAAsCD,IAAI,CAACW,WAA3C;ADEA,ACDD,ALCM,AEPHvE,ADHJ,IDUatF,AEPTsF,GAAG,EACD,MFMkB,GAAG,GAApB;AICL,ADXF,ADC6B,GAA3B,GEUI;AACF,ACDJ,AFRA,ADGC,ADCD,IIIIwE,MDCM,IAAIvB,ACDA,GAAG,EDCP,EAAN,ACDJ;ADEG,ADTH,AHOO,GIAL,CAEE,KJFYtI,EIELuI,GAAP,EAAY,MJFT,CACLtI,GADK,EAELC,MAFK,EAML;AIHE,ACFJ,AFIA,AHCE,AEVK,ICSDqF,EHFJpF,EIAMqI,AJGN,CKLOsB,AHLOxE,ECSH,GAAGE,CCFD,GAAG,ACFlB,CDEmB,ECFE,CFIG,CAACC,CCFD8C,GAAG,CAACE,AFPrB,CAA6BxI,GAA7B,CEOW,CFPuB,CEONyI,EDEnB,CAAwB,ECFtB,CAAuB,EDEzB,CAAhB,mCHFO,SAGL,gBIHgB,CAAd;ACDF,AFIF,AHAE,AETAzI,EAAAA,ECSIyF,CDTD,CGKCmE,ALEJzJ,AEPIuE,ECSI,GAAGa,CHAX,GETA,CGKA,AHLc,EGKE,CFIG,CAACC,QDTpB,EAA4B,ICSjB,CAAwB,aAAxB,CAAb,kCHFW,WAET;AIFE,ACDA,ANZG,AIgBP,AHDE,AEREnF,IHPS7B,AIgBPkH,ADTFrF,EFOFjB,EIDMmJ,AFNA,ECSI,ADTF,GCSKhD,AHDb,EIFE,EAAa,ALbS,CGMI,EHND,CIgBN,CAACC,cAAT,CAAwB,CJhBe,OIgBvC,CAAf,KJhBO,iCCcKxG,oBAASC,GACnB;AIDI,ACDH,AFIH,AHDEe,AEREoF,EFQFpF,EGCI2F,ADTFP,CFQC,CAAChF,CERC,EACD,CCQM,GCHCsI,ADGEnD,CHDb,CACE,MGAmB,CAACC,CCHD,CAAC+C,OAAO,CAAC,CAAD,CAAR,CAAjB,CDGS,CAAwB,QAAxB,CAAf;ACFK,ALdE,AIiBP,AHAMrI,AEZwB,GAA5B,CHLWzB,AIiBPmH,AHAA1F,EAAE,EAAEA,EDjBS,ACgBf,EGCU,CJjBQ,EIiBLqF,QAAQ,CAACC,cAAT,CAAwB,iBAAxB,CAAjB;ACFG,ACDDoE,ANbAlL,ACiBI2B,AERL,EGICuJ,ANbAlL,ECiBI2B,IAAI,EAAE,EKJA,CNbC,EMaEsG,ANZX,ICcA,MKFqB,CAAC,YAAY,mENdhB;AMelB,ANZFhI,AIeF,AHCMwB,EDhBJxB,EIeIkH,AHCA1F,IKJE2J,ELII,EDhBA,ACgBE3J,CKJD,CNXT,AIcY,EEHAoF,CFGG,CHFf,MKDoB,CAACwE,CFGnBlE,UAAa,KEHH,CAA0B,wBAA1B,CAAZ;ADEF,ALjBoB,AIkBH,AHEb,CDpBC,QKiBE,ADCiBF,GCDxB,GDC8B,CAACpD,IHEX,CGFI,CAAauD,MHFnC,OGEsB,GAA6B,gBAApC;ACAlB,ACFG,AFEe,AHGbxF,CGHN,GHGMA,KKLG,ELKI,EKLAuB,ALKEtC,CKLD,GAAG,CAAb,EAAgBsC,CAAC,GAAGiI,CLApB,IKAyB,CAACrI,MAA1B,EAAkCI,CAAC,EAAnC,EAAuC;AACrC,ANVN,ACeMtB,IDfA3B,ACeA2B,KAAK,CKLDsI,CLKG,EDfE,GMUC,ANVE,CMUDH,UAAP,CAAkBoB,KAAK,CAACjI,CAAD,CAAL,CAASwH,GNVrC,CMUU,MAAqCR,MAAM,CAACT,YAAP,EAAzC,EAAgE;ADGtE,ACFQW,ANVD,AIWP,AHIQ,IDfKlK,AIWPkH,IEDEgD,CDECL,CLZU,GAAG,CIWN,GAAG,CEDD,CDElB,ACFmBoB,CDEC1E,GAApB,CCFwB,CDEC,ACFAvD,CAAD,AFClBkE,CEDY,CAAV,QFCW;ACEjB,ACFK,ANVLjH,AIUiB,AHKX,EDfNA,IAAI,GKYG,ADFiB4G,CCEhB,KAAKN,ADFiB,CAAC7C,ECExB,ALZE3D,EKYS+J,CDFM,CAAa7C,EHKb,CAChB,EIJD,ALZH,CKYsB,ODFF,GAA6B,AHK7B,EAEhB,CDlBY,ACkBX,QAAD,CAFgB,EAGhB5G,EGRS,uBHKO,EAIhB,CAJgB,EAKhB,CALgB,EAMhB,GANgB,EAOhB,CAPgB,CAFb,MIDJ,EAA2F,IAA3F,IAAmG,GAA1G;AACD,ACFI,ANVHH,AISiB,AHcX,CGdR,CJTEA,SAAS,YAAKH,SAAL;AAFW,AC0Bd,CD1BD;AKgBPgK,ACFIgB,AFFJ,AHeQ,AC7BD,IIgBHA,AFFE5D,GCIC,CAACoC,CHlBQxH,KIgBF,AFFE,GEEC,AFFE,GCInB,CCFI,AJhBG,CAAsBZ,CGkBNmI,EHlBhB,CEcDnC,CHeuBxG,AC7BK,SEcf,KCInB,aJFa;AIGboJ,ACFG,ANVI,AIOY,AHgBX,AC7BN,GIOuB,CNDZ5J,CMUR,EDEE,ACXkB,CDWjB0J,ACXN,CFMwBhD,AFbjB1F,GFMY,AENT,CAACa,EFMW,AIOQ,CAAC0B,ECKjC,GAAqBmG,ADLK,AFbjB,CEa8B5C,EFbfhF,MAAf,CGkBT,AHlB+BC,IEaL,EFbjB,CEa8C,AFbjB,UAASC,GEa5B,IFbmB,EAAkBC,KAAlB,EAAyB;AIiB9D,ANVChC,AIMiB,AHiBX,AC7BJ,CEYJ,CJNEA,GAAG,EAAE,CAAC,AENAgC,KAAK,CAACZ,GFMP,CENC,CFMW,IENI,KFMhB,EAAuB,CEN1B,EAA6BL,GAAG,CAACkB,EFM9B,EAAkC,OENR,CAAgBD,CFM1C,EAA6C,EENE,CAACf,EAAtB,IFM1B;AADiB,ACyBhB,AC7BJ,CFIG,uCEJQc,OAAX,IAAoBC,KAAK,CAACf,EAA1B;AIiBJ8J,AFLA,AHkBQ,AC7BL,GAHM,CEcH/D,CFXD,CIgBC,CAAC2C,AJnBE,CAAP,IEcY,EEKd,CFLiB,EEKAiB,MLaQ,CGlBnB5D,EEKN,MFLiB,qBHkBsB7G,OAAd,CAjBZ;ADLN,AIIU,AHmBT,AC7BP,IFMYF,KIIWuG,IAAI,CAAClD,IJJF,CIIH,CAAWuD,CJJL,CAC5B,MAD4B,EAE5B,CAAC,EIEqB,GJFtB,AIEiD,EJFzC,iBIEO,CJFf,CAF4B,EAG5B,CAAC,KAAD,EAAQ,kBAAR,CAH4B,EAI5B,CAJ4B,CAAvB;AIIU,AHoBT,CGpBR,uBHoB0BrG,wBAnBb;AAoBL,AC7BD,IAAM0B,GAAG,GAAG,SAANA,GAAM,GAAe;AFW3B,AIFP,AHqBQ,AC9B0B,IFWrBhC,AIFP+G,QAAQ,GAAG,EJES,GAAG,IIFvBA,CHqBqB,IDnBd/G,GIFI,IFTMiC,MFWM,AEXK,CFWLhC,OAAO;AAAA,AIFnB,AHAJ,ACTUgC,IAAAA,KESCqE,CJGtB,AEZgC,GESN,CAAClD,KAAL,CAAWuD,GJEC,EAElC,CAAC,OIJqB,CJItB,CAFkC,CIFe,CJKjD,CAAC,cILc,GJKf,CAHkC,4BAI/B,gCAAoB1G,OAApB,EAA6B,IAA7B,CAJ+B;AAAA,AIFnB,AHNb,ACH8B,CFW3B,AIFP,EHPE,EA+BEa,MA/BF;AAiCAD,EAAAA,GAAG,CAACQ,gBAAJ,CAAqBN,EAArB,EAAyB,iBAAzB,EAA4CR,yBAA5C,EAlCA,CAmCA;AG1BF,AH2BE,ACpCA,IESIyG,EFTE9E,SAAS,CESC,EFTEC,CESC,GFTG,CAACC,GAAL,EESd4E,KFTc7E,IAAI,GESH,kBFTWF,MAAM,CAACpB,GAAP,CAAW,UAAAwB,CAAC;AFiBrC,AIRc,AH4BnB,ACrC0C,IFiB/BnC,KIReuG,EFToBpE,CAAC,CAACC,GFiBzB,CIRW,CAACc,CJQT,AEjBgB,CFiBf,CAAD,EAAI,AIRJ,CAAeuD,aAAf,GAA+B,GJQ/B,CAArB,eIRc;AAAA,AH6Bn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","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["import { buildHeatmapDencity } from \"./utils\";\n\nexport const isDevelopment = process.env.NODE_ENV === \"development\";\nexport const Tokens = {\n  development:\n    \"pk.eyJ1IjoiZHF1bmJwIiwiYSI6ImNqd3VuaGZyeTAwYTEzeW1oeHo3NHh1cnMifQ.AzNgwn8crwuAXGPmasjlzA\",\n  production:\n    \"pk.eyJ1IjoiZHF1bmJwIiwiYSI6ImNrM3l6dnNlNjBkZXAzbXAzMjh0d2g1NDcifQ.ShlseQwBKgaBIjKKhfkg3g\"\n};\n\nconst stylePath = \"mapbox://styles/mapbox\";\nexport const STYLES = {\n  dark: `${stylePath}/dark-v10`,\n  satellite: `${stylePath}/satellite-v9`\n};\n\nexport const PALETTES = {\n  red: [\"#FAE26B\", \"#DC4942\", \"#EA5C33\", \"#A82D4A\", \"#4E136C\"]\n};\n\nexport const pointSqrtCount = [\n  \"case\",\n  [\"has\", \"sqrt_point_count\"],\n  [\"get\", \"sqrt_point_count\"],\n  1\n];\n\nexport const getHeatColors = palette => [\n  \"interpolate\",\n  [\"linear\"],\n  [\"heatmap-density\"],\n  ...buildHeatmapDencity(palette, true)\n];\n\nexport const HEATMAP_ZERO = [0, \"rgba(33,102,172,0)\"];\nexport const HEATMAP_SHADES = [0.2, 0.4, 0.6, 0.8, 1];\nexport const h = 9; // heatmapDissapearingZoom\nexport const heatmapIntensity = [\n  \"interpolate\",\n  [\"linear\"],\n  [\"zoom\"],\n  0,\n  2,\n  h,\n  4\n];\n\nexport const heatmapRadius = [\"interpolate\", [\"linear\"], [\"zoom\"], 0, 2, h, 20];\nexport const heatmapOpacity = [\"interpolate\", [\"linear\"], [\"zoom\"], 7, 1, h, 0];\n\nexport const circleOpacity = [\n  \"interpolate\",\n  [\"linear\"],\n  [\"zoom\"],\n  6,\n  0.5,\n  15,\n  1\n];\nexport const circleRadius = [\"interpolate\", [\"linear\"], [\"zoom\"], 10, 2, 22, 4];\nexport const circlesLayout = { \"circle-sort-key\": [\"get\", \"sqrt_point_count\"] };\n","import { PALETTES, pointSqrtCount } from \"./constants\";\nimport {\n  h,\n  heatmapIntensity,\n  heatmapRadius,\n  heatmapOpacity,\n  getHeatColors\n} from \"./constants\";\nimport { circleOpacity, circlesLayout, circleRadius } from \"./constants\";\n\nexport const removeDelay = 150;\nexport function loadHeatLayer(\n  map,\n  before,\n  id = \"gt-heat\",\n  source = \"gt-points\",\n  palette = PALETTES.red\n) {\n  map.addLayer(\n    {\n      id: id,\n      type: \"heatmap\",\n      source: source,\n      \"source-layer\": \"points\",\n      maxzoom: h,\n      paint: {\n        // Increase the heatmap weight based on frequency and property magnitude\n        \"heatmap-weight\": [\n          \"interpolate\",\n          [\"linear\"],\n          pointSqrtCount,\n          0,\n          0,\n          500,\n          1\n        ],\n        // Increase the heatmap color weight weight by zoom level\n        // heatmap-intensity is a multiplier on top of heatmap-weight\n        \"heatmap-intensity\": heatmapIntensity,\n        // Color ramp for heatmap.  Domain is 0 (low) to 1 (high).\n        // Begin color ramp at 0-stop with a 0-transparancy color\n        // to create a blur-like effect.\n        \"heatmap-color\": getHeatColors(palette),\n        // Adjust the heatmap radius by zoom level\n        \"heatmap-radius\": heatmapRadius,\n        // Transition from heatmap to circle layer by zoom level\n        \"heatmap-opacity\": 0\n      }\n    },\n    before\n  );\n  map.setPaintProperty(id, \"heatmap-opacity\", heatmapOpacity);\n  // return () => {\n  //   map.setPaintProperty(id, \"heatmap-opacity\", 0);\n  //   setTimeout(() => map.removeLayer(id), removeDelay);\n  // };\n  return id;\n}\n\nexport function loadCircleLayer(\n  map,\n  before,\n  id = \"gt-points\",\n  source = \"gt-points\",\n  palette = PALETTES.red\n) {\n  map.addLayer(\n    {\n      id: id,\n      type: \"circle\",\n      source: source,\n      \"source-layer\": \"points\",\n      minzoom: 8,\n      layout: circlesLayout,\n      paint: {\n        \"circle-radius\": circleRadius,\n        \"circle-color\": \"yellow\", //palette[0],\n        \"circle-stroke-width\": 1,\n        \"circle-stroke-color\": palette[0],\n        \"circle-opacity\": 0,\n        \"circle-stroke-opacity\": 0\n      }\n    },\n    before\n  );\n  map.setPaintProperty(id, \"circle-stroke-opacity\", circleOpacity);\n  map.setPaintProperty(id, \"circle-opacity\", circleOpacity);\n  // return () => {\n  //   map.setPaintProperty(id, \"circle-opacity\", 0);\n  //   setTimeout(() => map.removeLayer(id), removeDelay);\n  // };\n  return id;\n}\n","import {\n  PALETTES,\n  HEATMAP_ZERO,\n  HEATMAP_SHADES,\n  pointSqrtCount\n} from \"./constants\";\n\nimport { loadHeatLayer, loadCircleLayer } from \"./layers\";\n\nexport function removeLabels(map) {\n  return map.getStyle().layers.reduce(function(removed, layer) {\n    if (layer.type === \"symbol\") map.removeLayer(layer.id);\n    return [...removed, layer.id];\n  }, []);\n}\n\nexport const zip = (...arrays) => {\n  const maxLength = Math.max(...arrays.map(x => x.length));\n  return Array.from({ length: maxLength }).map((_, i) => {\n    return Array.from({ length: arrays.length }, (_, k) => arrays[k][i]);\n  });\n};\n\nexport function buildHeatmapDencity(palete = PALETTES.red, reverse = false) {\n  const result = HEATMAP_ZERO.concat(\n    zip(HEATMAP_SHADES, reverse ? palete.slice().reverse() : palete)\n  );\n  return result.flat();\n}\n\nexport function getLabelsLayer(style) {\n  let layers = style.layers;\n  let firstSymbolId = null;\n  for (let i = 0; i < layers.length; i++) {\n    if (layers[i].type === \"symbol\") {\n      firstSymbolId = layers[i].id;\n      break;\n    }\n  }\n  return firstSymbolId;\n}\n\nexport function createInteractionsSwitcher(map, interactions = \"all\") {\n  const allInteractions = [\n    \"scrollZoom\",\n    \"boxZoom\",\n    \"dragRotate\",\n    \"dragPan\",\n    \"keyboard\",\n    \"doubleClickZoom\",\n    \"touchZoomRotate\"\n  ];\n  const handlers = interactions === \"all\" ? allInteractions : interactions;\n  return function(enable) {\n    const operation = enable ? \"enable\" : \"disable\";\n    handlers.forEach(h => map[h][operation]());\n  };\n}\n\nexport const getCircleColor = colorSteps => [\n  \"interpolate\",\n  [\"linear\"],\n  pointSqrtCount,\n  ...colorSteps\n];\n\nexport const createLayersKeeper = (map, keepLayers = []) => {\n  let layerIds = [],\n    sourceIds = [],\n    before = {};\n  for (let l of keepLayers) {\n    layerIds.push(l.id);\n    sourceIds.push(l.source || l.id);\n    if (l.before) before[l.id] = l.before;\n  }\n  const filterLayers = ({ id }) => layerIds.some(l => id.startsWith(l));\n  const filterSources = id => sourceIds.some(s => id.startsWith(s));\n  // const filterLayers = l => layerIds.indexOf(l.id) !== -1;\n  // const filterSources = id => sourceIds.indexOf(id) !== -1;\n  return (nextStyle, onStyleChanged = () => {}) => {\n    const currentStyle = map.getStyle();\n    const dataLayers = currentStyle.layers.filter(filterLayers);\n    const dataSources = Object.keys(currentStyle.sources)\n      .filter(filterSources)\n      .reduce(\n        (acc, s) => ({\n          ...acc,\n          [s]: currentStyle.sources[s]\n        }),\n        {}\n      );\n    map.setStyle(nextStyle);\n\n    map.once(\"styledata\", () => {\n      const style = map.getStyle();\n      onStyleChanged(style);\n      const layers = style.layers;\n      const nextLayerIds = layers.map(({ id }) => id);\n      Object.keys(dataSources).forEach(s => map.addSource(s, dataSources[s]));\n      dataLayers.forEach(l => {\n        const boforeIndex = nextLayerIds.indexOf(before[l.id]);\n        map.addLayer(l, boforeIndex !== -1 ? before[l.id] : undefined);\n        layers.splice(boforeIndex, 0);\n      });\n    });\n  };\n};\n\nexport const switchDataLayers = (id, map, before, currentDataLayers) => {\n  for (let l of currentDataLayers) map.removeLayer(l);\n  const heatId = loadHeatLayer(map, before, `heat-${id}`, `points-${id}`);\n  const circlesId = loadCircleLayer(\n    map,\n    `heat-${id}`,\n    `points-${id}`,\n    `points-${id}`\n  );\n  return [heatId, circlesId];\n};\n","export function loadGTPointsSource(map) {\n  map.addSource(\"points-gt\", {\n    type: \"vector\",\n    url:\n      \"https://demo.geoalert.io/data/GT_cluster_densest_as_needed_max25K_features_max100Kbytes.json\"\n  });\n}\nexport function loadOSMPointsSource(map) {\n  map.addSource(\"points-osm\", {\n    type: \"vector\",\n    url:\n      \"https://demo.geoalert.io/data/OSM_cluster_densest_as_needed_max25K_features_max100Kbytes.json\"\n  });\n}\n","/* globals mapboxgl */\n\nimport \"./styles/styles\";\n// import \"mapbox-gl/dist/mapbox-gl.css\";\n// import mapboxgl from \"mapbox-gl\";\nimport {\n  removeLabels,\n  getLabelsLayer,\n  createInteractionsSwitcher,\n  createLayersKeeper,\n  switchDataLayers\n} from \"./utils\";\nimport { loadHeatLayer, loadCircleLayer } from \"./layers\";\nimport { loadGTPointsSource, loadOSMPointsSource } from \"./sources\";\nimport { STYLES, isDevelopment, Tokens } from \"./constants\";\n\nconst mapNode = document.getElementById(\"map\");\nconst info = document.getElementById(\"footer-info\");\nconst header = document.getElementById(\"header\");\nconst navbar = document.getElementById(\"navbar\");\nconst controls = document.getElementById(\"footer-controls\");\nconst showNavbar = () => (navbar.style.animationName = \"appearsFromTop\");\nconst showHeader = () => (header.style.animationName = \"appearsFromTop\");\nconst hideHeader = () => (header.style.animationName = \"vanishToTop\");\nconst showInfo = () => (info.style.animationName = \"appearsFromBottom\");\nconst hideInfo = () => (info.style.animationName = \"vanishToBottom\");\nconst showControls = () => (controls.style.animationName = \"appearsFromBottom\");\nconst hideControls = () => (info.style.animationName = \"vanishToBottom\");\n\n// window.addEventListener(\"resize\", function() {\n//   let vh = window.innerHeight * 0.01;\n//   document.documentElement.style.setProperty(\"--vh\", `${vh}px`);\n// });\n\n// showControls();\nshowInfo();\nshowHeader();\nshowNavbar();\n// const hidePlacehoder = () => mapNode.classList.add(\"loaded\");\n// hidePlacehoder();\n\nconst exploreBtn = document.getElementById(\"explore\");\nexploreBtn.addEventListener(\"click\", startExploring);\n\nlet map,\n  setStyle,\n  switchInteractions,\n  labelsLayerId,\n  currentDataLayers = [];\n\nconst accessToken = isDevelopment ? Tokens.development : Tokens.production;\nsetTimeout(function() {\n  map = new mapboxgl.Map({\n    accessToken,\n    container: mapNode,\n    style: \"mapbox://styles/mapbox/dark-v10\",\n    zoom: 2.71,\n    center: [83.66, 58.56],\n    minZoom: 2.71,\n    // hash: true,\n    attributionControl: false\n  });\n  switchInteractions = createInteractionsSwitcher(map);\n  map.once(\"styledata\", function() {\n    removeLabels(map);\n    labelsLayerId = getLabelsLayer(map.getStyle());\n    loadGTPointsSource(map);\n    loadOSMPointsSource(map);\n    const heatId = loadHeatLayer(map, labelsLayerId, \"heat-gt\", \"points-gt\");\n    const circlesId = loadCircleLayer(map, \"heat-gt\", \"points-gt\", \"points-gt\");\n    currentDataLayers = currentDataLayers.concat([heatId, circlesId]);\n    switchInteractions(false);\n    map.getCanvas().style.cursor = \"default\";\n  });\n}, 100);\n\nfunction startExploring() {\n  hideHeader();\n  hideInfo();\n  showControls();\n  map.flyTo({\n    duration: 10000,\n    zoom: 15.65,\n    center: [37.162168, 55.698564]\n  });\n  setTimeout(function() {\n    switchInteractions(true);\n    map.getCanvas().style.cursor = \"\";\n    toggleBaseMap({ passedId: \"satellite\" });\n  }, 1500);\n}\n\nconst keepLayers = [\n  { id: \"points-gt\", before: labelsLayerId },\n  { id: \"points-osm\", before: labelsLayerId },\n  { id: \"heat-gt\", before: labelsLayerId },\n  { id: \"heat-osm\", before: labelsLayerId }\n];\nsetTimeout(function() {\n  setStyle = createLayersKeeper(map, keepLayers);\n}, 101);\n\nfunction onStyleChanged(style) {\n  labelsLayerId = getLabelsLayer(style);\n}\n\nconst baseMapTogglers = document.getElementsByClassName(\"basemap-toggle\");\nlet prevStyleId;\nfunction toggleBaseMap({ passedId }) {\n  let id = passedId || this.id;\n  if (id === prevStyleId) return;\n  prevStyleId = id;\n  for (let t of baseMapTogglers) t.classList.toggle(\"is-focused\");\n  setStyle(STYLES[id], onStyleChanged);\n}\nfor (let t of baseMapTogglers) t.addEventListener(\"click\", toggleBaseMap);\n\nconst dataLayerTogglers = document.getElementsByClassName(\"datalayer-toggle\");\nlet prevLayerId;\nfunction toggleDataLayer() {\n  let id = this.id;\n  if (id === prevLayerId) return;\n  prevLayerId = id;\n  for (let t of dataLayerTogglers) t.classList.toggle(\"is-focused\");\n  currentDataLayers = switchDataLayers(\n    id,\n    map,\n    labelsLayerId,\n    currentDataLayers\n  );\n}\nfor (let t of dataLayerTogglers) t.addEventListener(\"click\", toggleDataLayer);\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}